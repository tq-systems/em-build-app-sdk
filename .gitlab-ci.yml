---
include:
- project: tq-em/build/docker/toolchain-ci
  file: common/include.yml
  ref: v7.0.3_tc7.2.1
  rules:
    - if: '$CI_COMMIT_TAG'
    - if: '$CI_COMMIT_BRANCH =~ /^release/'
    - if: '$CI_MERGE_REQUEST_TARGET_BRANCH_NAME =~ /^release/'

- project: tq-em/build/docker/toolchain-ci
  file: common/include.yml
  ref: master
  rules:
    - if: '$CI_COMMIT_TAG'
      when: never
    - if: '$CI_COMMIT_BRANCH =~ /^release/'
      when: never
    - if: '$CI_MERGE_REQUEST_TARGET_BRANCH_NAME =~ /^release/'
      when: never
    - when: always

stages:
- build
- test
- deploy

Build Documentaion:
  stage: build
  extends:
    - .artifacts-always-one-week
    - .gitlab-runner-linux
    - .image-doc
  script: make docs
